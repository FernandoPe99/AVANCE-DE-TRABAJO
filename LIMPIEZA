#BASE LAPOP

library(haven)
PROTESTA <- read_sav("C:/Users/Fernando Peñaranda/Downloads/1941750101Peru LAPOP AmericasBarometer 2014 Espanol v3.0_W.sav")
View(PROTESTA)
install.packages("htmltab")
library(htmltab)
install.packages("tidyr")
library(tidyr)
install.packages("stringr")
library(stringr)
install.packages("magrittr")
library(magrittr)
names(PROTESTA)

#elimino columnas que no sirven

PROTESTA$idnum=NULL
PROTESTA$estratopri=NULL
PROTESTA$estratosec=NULL
PROTESTA$upm=NULL
PROTESTA$cluster=NULL
PROTESTA$tamano=NULL
PROTESTA$fecha=NULL
PROTESTA$wt=NULL
PROTESTA$q2y=NULL
PROTESTA$ls3=NULL
PROTESTA$a4=NULL
PROTESTA$idio2=NULL
PROTESTA$soct2=NULL
PROTESTA$np1=NULL
PROTESTA$np2=NULL
PROTESTA$sgl1=NULL
PROTESTA$sgl2=NULL
PROTESTA$muni5=NULL
PROTESTA$muni6=NULL
PROTESTA$muni11=NULL
PROTESTA$cp4a=NULL
PROTESTA$cp5=NULL
PROTESTA$cp6=NULL
PROTESTA$cp7=NULL
PROTESTA$cp20=NULL
PROTESTA$uniq_id=NULL
PROTESTA$idiomaq=NULL
PROTESTA$cpss1=NULL
PROTESTA$it1=NULL
PROTESTA$jc10=NULL
PROTESTA$jc13=NULL
PROTESTA$jc15a=NULL
PROTESTA$vic1ext=NULL
PROTESTA$vic1exta=NULL
names(PROTESTA)
PROTESTA[,c(17:184)]=NULL

#CAMBIAR NOMBRES PARA ENTENDERLO MEJOR

names(PROTESTA)[names(PROTESTA)=="prov"]="DEPARTAMENTO"
names(PROTESTA)[names(PROTESTA)=="municipio"]="MUNICIPIO"
names(PROTESTA)[names(PROTESTA)=="perprov"]="PRVINCIA"
names(PROTESTA)[names(PROTESTA)=="idiomaq"]="IDIOMA"
names(PROTESTA)[names(PROTESTA)=="q1"]="SEXO"
names(PROTESTA)[names(PROTESTA)=="q2"]="EDAD"
names(PROTESTA)[names(PROTESTA)=="cp13"]="PARTIDOS"
names(PROTESTA)[names(PROTESTA)=="l1"]="IDEOLOGIA"
names(PROTESTA)[names(PROTESTA)=="prot3"]="PROTESTA"
names(PROTESTA)[names(PROTESTA)=="cp8"]="ASISTENCIA"

#CAMBIAR LOS VALORES PARA ENTENDER LO QUE SIGNIFICAN

PROTESTA$pais <- gsub("11","Perú",PROTESTA$pais)
PROTESTA$ur <- gsub("1","Urbano",PROTESTA$ur)
PROTESTA$ur <- gsub("2","Rural",PROTESTA$ur)
PROTESTA$IDIOMA <- gsub("1","Español",PROTESTA$IDIOMA)
PROTESTA$SEXO <- gsub("1","Hombre",PROTESTA$SEXO)
PROTESTA$SEXO <- gsub("2","Mujer",PROTESTA$SEXO)
PROTESTA$ASISTENCIA <- gsub("1","Una vez a la semana",PROTESTA$ASISTENCIA)
PROTESTA$ASISTENCIA <- gsub("2","Una o dos veces al mes",PROTESTA$ASISTENCIA)
PROTESTA$ASISTENCIA <- gsub("3","Una o dos veces al año",PROTESTA$ASISTENCIA)
PROTESTA$ASISTENCIA <- gsub("4","Nunca",PROTESTA$ASISTENCIA)
PROTESTA$PROTESTA <- gsub("1","SI PARTICIPO",PROTESTA$PROTESTA)
PROTESTA$PROTESTA <- gsub("2","NO PARTICIPO",PROTESTA$PROTESTA)
PROTESTA$PARTIDOS <- gsub("1","Una vez a la semana",PROTESTA$PARTIDOS)
PROTESTA$PARTIDOS <- gsub("2","Una o dos veces al mes",PROTESTA$PARTIDOS)
PROTESTA$PARTIDOS <- gsub("3","Una o dos veces al año",PROTESTA$PARTIDOS)
PROTESTA$PARTIDOS <- gsub("4","Nunca",PROTESTA$PARTIDOS)

#FUTUROS CLUSTERS
PROTESTA=na.omit(PROTESTA)
PROTESTA[!complete.cases(PROTESTA),]




